.\" -*- nroff -*-
.TH DELIVER 8 "Project Cyrus" CMU
.\" Copyright 1998 Carnegie Mellon University
.\" 
.\" No warranties, either expressed or implied, are made regarding the
.\" operation, use, or results of the software.
.\"
.\" Permission to use, copy, modify and distribute this software and its
.\" documentation is hereby granted for non-commercial purposes only
.\" provided that this copyright notice appears in all copies and in
.\" supporting documentation.
.\"
.\" Permission is also granted to Internet Service Providers and others
.\" entities to use the software for internal purposes.
.\"
.\" The distribution, modification or sale of a product which uses or is
.\" based on the software, in whole or in part, for commercial purposes or
.\" benefits requires specific, additional permission from:
.\"
.\"  Office of Technology Transfer
.\"  Carnegie Mellon University
.\"  5000 Forbes Avenue
.\"  Pittsburgh, PA  15213-3890
.\"  (412) 268-4387, fax: (412) 268-7395
.\"  tech-transfer@andrew.cmu.edu
.SH NAME
deliver \- deliver mail to an IMAP mailbox
.SH SYNOPSIS
.B deliver
[
.B \-d
]
[
.B \-r
.I address
]
[
.B \-f
.I address
]
[
.B \-m
.I mailbox
]
[
.B \-a
.I auth-id
]
[
.B \-e
]
[
.B \-q
]
[
.B \-F
flag
]...
.br
[
.I userid
]...
.br
.B deliver
.B \-l
[
.B \-e
]
[
.B \-q
]
.br
.B deliver
.B \-E
.I days
.SH DESCRIPTION
.I Deliver
reads a message from the standard input and delivers it to one or more
IMAP mailboxes.
.PP
.I Deliver
reads its configuration options out of the
.IR imapd.conf (5)
file.
.SH OPTIONS
.TP
.B \-d
Ignored for compatability with 
.B /bin/mail.
.TP
.BI \-r " address"
Insert a 
.B Return-Path: 
header containing
.i address
.TP
.BI \-f " address"
Insert a 
.B Return-Path: 
header containing
.i address
.TP
.BI \-m " mailbox"
Deliver to 
.IR mailbox .
If any
.IR userid s
are specified, attempts to deliver to
.RI user. userid . mailbox
for each 
.IR userid .
If the ACL on any such mailbox does not grant the sender the "p" right
or if 
.B \-m
is not specified,
then delivers to the INBOX for the
.IR userid ,
regardless of the ACL on the INBOX.
.IP
If no
.IR userid s
are specified, attempts to deliver to
.IR mailbox .
If the ACL on
.I mailbox
does not grant the sender the "p" right, the delivery fails.
.TP
.BI \-a " auth-id"
Specify the authorization id of the sender.  Defaults to "anonymous".
.TP
.B \-e
Enable duplicate delivery suppression.  Will suppress delivery of the
message to a mailbox if a message with the same message-id (or
resent-message-id) is recorded as having already been delivered to the
mailbox.  Records the mailbox and message-id/resent-message-id of all
successful deliveries.
.TP
.B \-q
Deliver message even when receiving mailbox is over quota.
.TP
.BI \-F " flag"
Set the system flag or keyword
.I flag
on the delivered message.
.TP
.B \-l
Accept messages using the LMTP protocol.
.TP
.BI \-E " days"
Prune the duplicate delivery database of entries older than
.IR days .
.SH NOTES
Depending on the setting of \fBreject8bit\fR in \fBimapd.conf(5)\fR, deliver
either rejects messages with 8-bit-set characters in the headers or 
changes these characters to `X'.
This is because such characters can't be interpreted since the
character set is not known, although some communities not well-served by
US-ASCII assume that those characters can be used to represent characters not
present in US-ASCII.
.PP
A method for encoding 8-bit-set characters is provided by RFC 2047.
.SH FILES
.TP
.B /etc/imapd.conf
